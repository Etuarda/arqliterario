<div class="container">
  <%= render "shared/open_library_search",
    title: "Guardar uma nova leitura",
    label: "Qual livro andas a ler?",
    placeholder: "Procurar pelo título no acervo mundial..." %>

  <%= form_with(model: @book, id: "real-book-form") do |form| %>
    <% if @book.errors.any? %>
      <div class="error-messages">
        <h2><%= pluralize(@book.errors.count, "erro") %> impediram o salvamento:</h2>
        <ul>
          <% @book.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="registration-box detail-box">
      <h3 class="form-subheading">Detalhes da Edição</h3>

      <div class="form-group">
        <%= form.label :title, "Título da obra", class: "input-label" %>
        <%= form.text_field :title, id: "field-title", class: "vintage-input-small" %>
      </div>

      <div class="form-group">
        <%= form.label :author, "Autor(a)", class: "input-label" %>
        <%= form.text_field :author, id: "field-author", class: "vintage-input-small" %>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= form.label :published_year, "Ano", class: "input-label" %>
          <%= form.number_field :published_year, id: "field-year", class: "vintage-input-small" %>
        </div>

        <div class="form-group">
          <%= form.label :status, "Status", class: "input-label" %>
          <%= form.select :status,
                Book.statuses.keys.map { |key| [key.humanize, key] },
                {},
                { class: "vintage-input-small" } %>
        </div>
      </div>

      <div class="form-group">
        <%= form.label :isbn, "ISBN", class: "input-label" %>
        <%= form.text_field :isbn, id: "field-isbn", class: "vintage-input-small" %>
      </div>

      <%= form.hidden_field :image_url, id: "field-image" %>

      <div class="form-actions">
        <%= form.submit "Confirmar e Guardar no Memorial", class: "btn-main" %>
      </div>
    </div>
  <% end %>
</div>
